"use strict";function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var DockSpawnTS=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e){i.d(n,s,function(t){return e[t]}.bind(null,s))}return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";var n,s,o,l;i.r(t),function(e){e.horizontal="horizontal",e.vertical="vertical",e.fill="fill",e.panel="panel"}(n||(n={}));var a=function a(e,t){_classCallCheck(this,a);this.x=e,this.y=t};var h=function(){function h(){_classCallCheck(this,h)}_createClass(h,null,[{key:"getPixels",value:function getPixels(e){return null===e?0:parseInt(e.replace("px",""))}},{key:"disableGlobalTextSelection",value:function disableGlobalTextSelection(e){e.classList.add("disable-selection")}},{key:"enableGlobalTextSelection",value:function enableGlobalTextSelection(e){e.classList.remove("disable-selection")}},{key:"isPointInsideNode",value:function isPointInsideNode(e,t,i){var n=i.container.containerElement.getBoundingClientRect();return e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height}},{key:"getNextId",value:function getNextId(e){return e+h._counter++}},{key:"removeNode",value:function removeNode(e){return null!==e.parentNode&&(e.parentNode.removeChild(e),!0)}},{key:"orderByIndexes",value:function orderByIndexes(e,t){var i=[];for(var _n=0;_n<t.length;_n++){i.push(e[t[_n]])}return i}},{key:"arrayRemove",value:function arrayRemove(e,t){var i=e.indexOf(t);return-1!==i&&e.splice(i,1)}},{key:"arrayContains",value:function arrayContains(e,t){var i=e.length;for(;i--;){if(e[i]===t)return!0}return!1}},{key:"arrayEqual",value:function arrayEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var _i=0;_i<e.length;++_i){if(e[_i]!==t[_i])return!1}return!0}}]);return h}();h._counter=0;var r=function(){function r(e,t,i,n){_classCallCheck(this,r);this.target=i,this.eventName=t,this.source=e,this.source.addEventListener(t,this.target,n)}_createClass(r,[{key:"cancel",value:function cancel(){this.source.removeEventListener(this.eventName,this.target)}}]);return r}();var d=function(){function d(e,t,i){_classCallCheck(this,d);i||(i=7),this.element=e,this._undockededCallback=t,this.thresholdPixels=i,this._enabled=!1}_createClass(d,[{key:"onMouseDown",value:function onMouseDown(e){if(this.enabled){if(e.touches){if(e.touches.length>1)return;e=e.touches[0]}this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler),this.mouseUpHandler=new r(window,"mouseup",this.onMouseUp.bind(this)),this.touchUpHandler=new r(window,"touchend",this.onMouseUp.bind(this)),this.mouseMoveHandler=new r(window,"mousemove",this.onMouseMove.bind(this)),this.touchMoveHandler=new r(window,"touchmove",this.onMouseMove.bind(this)),this.dragStartPosition=new a(e.clientX,e.clientY)}}},{key:"onMouseUp",value:function onMouseUp(){this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler)}},{key:"onMouseMove",value:function onMouseMove(e){if(e.touches){if(e.touches.length>1)return;e=e.touches[0]}var t=new a(e.clientX,e.clientY).y-this.dragStartPosition.y;(t>this.thresholdPixels||t<-this.thresholdPixels)&&(this.enabled=!1,this._requestUndock(e))}},{key:"_requestUndock",value:function _requestUndock(e){var t=0,i=0,n=this.element;do{t+=n.offsetTop||0,i+=n.offsetLeft||0,n=n.offsetParent}while(n);var s=this.dragStartPosition.x-i,o=this.dragStartPosition.y-t,l=new a(s,o);this._undockededCallback(e,l)}},{key:"enabled",get:function get(){return this._enabled},set:function set(e){this._enabled=e,this._enabled?(this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.touchDownHandler&&(this.touchDownHandler.cancel(),delete this.touchDownHandler),this.mouseDownHandler=new r(this.element,"mousedown",this.onMouseDown.bind(this)),this.touchDownHandler=new r(this.element,"touchstart",this.onMouseDown.bind(this))):(this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.touchDownHandler&&(this.touchDownHandler.cancel(),delete this.touchDownHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler))}}]);return d}();!function(e){e.document="document",e.panel="panel"}(s||(s={}));var c=function(){function c(e,t,i,o,l){_classCallCheck(this,c);i||(i="Panel"),o||(o=s.panel),this.panelType=o,this.elementContent=Object.assign(e,{_dockSpawnPanelContainer:this}),this.dockManager=t,this.title=i,this.containerType=n.panel,this.icon=null,this.minimumAllowedChildNodes=0,this._floatingDialog=void 0,this.isDialog=!1,this._canUndock=t._undockEnabled,this.eventListeners=[],this._hideCloseButton=l,this._initialize()}_createClass(c,[{key:"canUndock",value:function canUndock(e){var _this=this;this._canUndock=e,this.undockInitiator.enabled=e,this.eventListeners.forEach(function(t){t.onDockEnabled&&t.onDockEnabled({self:_this,state:e})})}},{key:"addListener",value:function addListener(e){this.eventListeners.push(e)}},{key:"removeListener",value:function removeListener(e){this.eventListeners.splice(this.eventListeners.indexOf(e),1)}},{key:"saveState",value:function saveState(e){e.element=this.elementContent.id,e.width=this.width,e.height=this.height,e.canUndock=this._canUndock,e.hideCloseButton=this._hideCloseButton,e.panelType=this.panelType}},{key:"loadState",value:function loadState(e){this.width=e.width,this.height=e.height,this.state={width:e.width,height:e.height},this.canUndock(e.canUndock),this.hideCloseButton(e.hideCloseButton),this.panelType=e.panelType}},{key:"setActiveChild",value:function setActiveChild(){}},{key:"_initialize",value:function _initialize(){this.name=h.getNextId("panel_"),this.elementPanel=document.createElement("div"),this.elementPanel.tabIndex=0,this.elementTitle=document.createElement("div"),this.elementTitleText=document.createElement("div"),this.elementContentHost=document.createElement("div"),this.elementButtonClose=document.createElement("div"),this.elementPanel.appendChild(this.elementTitle),this.elementTitle.appendChild(this.elementTitleText),this.elementTitle.appendChild(this.elementButtonClose),this.elementButtonClose.classList.add("panel-titlebar-button-close"),this.elementButtonClose.style.display=this._hideCloseButton?"none":"block",this.elementPanel.appendChild(this.elementContentHost),this.elementPanel.classList.add("panel-base"),this.elementTitle.classList.add("panel-titlebar"),this.elementTitle.classList.add("disable-selection"),this.elementTitleText.classList.add("panel-titlebar-text"),this.elementContentHost.classList.add("panel-content");var e=this.elementContent.clientWidth,t=this.elementContent.clientHeight,i=this.elementTitle.clientHeight;this._setPanelDimensions(e,t+i),this._hideCloseButton||(this.closeButtonClickedHandler=new r(this.elementButtonClose,"click",this.onCloseButtonClicked.bind(this))),h.removeNode(this.elementContent),this.elementContentHost.appendChild(this.elementContent);var n=this.elementContent.dataset.panelCaption,s=this.elementContent.dataset.panelIcon;n&&(this.title=n),s&&(this.icon=s),this._updateTitle(),this.undockInitiator=new d(this.elementTitle,this.performUndockToDialog.bind(this)),delete this.floatingDialog,this.mouseDownHandler=new r(this.elementPanel,"mousedown",this.onMouseDown.bind(this)),this.touchDownHandler=new r(this.elementPanel,"touchstart",this.onMouseDown.bind(this)),this.elementContent.removeAttribute("hidden")}},{key:"onMouseDown",value:function onMouseDown(){this.dockManager.activePanel=this}},{key:"hideCloseButton",value:function hideCloseButton(e){var _this2=this;this._hideCloseButton=e,this.elementButtonClose.style.display=e?"none":"block",this.eventListeners.forEach(function(t){t.onHideCloseButton&&t.onHideCloseButton({self:_this2,state:e})})}},{key:"destroy",value:function destroy(){this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.touchDownHandler&&(this.touchDownHandler.cancel(),delete this.touchDownHandler),h.removeNode(this.elementPanel),this.closeButtonClickedHandler&&(this.closeButtonClickedHandler.cancel(),delete this.closeButtonClickedHandler)}},{key:"performUndockToDialog",value:function performUndockToDialog(e,t){return this.isDialog=!0,this.undockInitiator.enabled=!1,this.elementContent.style.display="block",this.elementPanel.style.position="",this.dockManager.requestUndockToDialog(this,e,t)}},{key:"performClose",value:function performClose(){this.isDialog=!0,this.undockInitiator.enabled=!1,this.elementContent.style.display="block",this.elementPanel.style.position="",this.dockManager.requestClose(this)}},{key:"performUndock",value:function performUndock(){this.undockInitiator.enabled=!1,this.dockManager.requestUndock(this)}},{key:"prepareForDocking",value:function prepareForDocking(){this.isDialog=!1,this.undockInitiator.enabled=this._canUndock}},{key:"resize",value:function resize(e,t){this._setPanelDimensions(e,t),this._cachedWidth=e,this._cachedHeight=t;try{null!=this.elementContent&&"function"==typeof this.elementContent.resizeHandler&&this.elementContent.resizeHandler(e,t-this.elementTitle.clientHeight)}catch(e){console.log("error calling resizeHandler:",e," elt:",this.elementContent)}}},{key:"_setPanelDimensions",value:function _setPanelDimensions(e,t){this.elementTitle.style.width=e+"px",this.elementContentHost.style.width=e+"px",this.elementContent.style.width=e+"px",this.elementPanel.style.width=e+"px";var i=t-this.elementTitle.clientHeight;this.elementContentHost.style.height=i+"px",this.elementContent.style.height=i+"px",this.elementPanel.style.height=t+"px"}},{key:"setTitle",value:function setTitle(e){this.title=e,this._updateTitle(),this.onTitleChanged&&this.onTitleChanged(this,e)}},{key:"setTitleIcon",value:function setTitleIcon(e){this.icon=e,this._updateTitle(),this.onTitleChanged&&this.onTitleChanged(this,this.title)}},{key:"setCloseIconTemplate",value:function setCloseIconTemplate(e){this.elementButtonClose.innerHTML=e}},{key:"_updateTitle",value:function _updateTitle(){null===this.icon?this.elementTitleText.innerHTML=this.title:this.elementTitleText.innerHTML='<img class="panel-titlebar-icon" src="'+this.icon+'"><span>'+this.title+"</span>"}},{key:"getRawTitle",value:function getRawTitle(){return this.elementTitleText.innerHTML}},{key:"performLayout",value:function performLayout(e,t){}},{key:"onCloseButtonClicked",value:function onCloseButtonClicked(){this.close()}},{key:"close",value:function close(){this.isDialog?this.floatingDialog&&(this.floatingDialog.hide(),this.floatingDialog.remove()):this.performClose(),this.dockManager.notifyOnClosePanel(this)}},{key:"floatingDialog",get:function get(){return this._floatingDialog},set:function set(e){this._floatingDialog=e;var t=void 0===this._floatingDialog;this.undockInitiator.enabled=t}},{key:"containerElement",get:function get(){return this.elementPanel}},{key:"width",get:function get(){return this._cachedWidth},set:function set(e){e!==this._cachedWidth&&(this._cachedWidth=e,this.elementPanel.style.width=e+"px")}},{key:"height",get:function get(){return this._cachedHeight},set:function set(e){e!==this._cachedHeight&&(this._cachedHeight=e,this.elementPanel.style.height=e+"px")}}],[{key:"loadFromState",value:function loadFromState(e,t){var i=e.element,n=document.getElementById(i);if(null===n)return null;var s=new c(n,t);return s.loadState(e),s}}]);return c}();var u=function(){function u(e,t,i,n){_classCallCheck(this,u);this.dialog=e,this.delegate=t,this.containerElement=t.containerElement,this.dockManager=t.dockManager,this.topLevelElement=i,this.containerType=t.containerType,this.mouseDownHandler=new r(n,"mousedown",this.onMouseDown.bind(this)),this.touchDownHandler=new r(n,"touchstart",this.onMouseDown.bind(this)),this.topLevelElement.style.marginLeft=i.offsetLeft+"px",this.topLevelElement.style.marginTop=i.offsetTop+"px",this.minimumAllowedChildNodes=t.minimumAllowedChildNodes}_createClass(u,[{key:"destroy",value:function destroy(){this.removeDecorator(),this.delegate.destroy()}},{key:"saveState",value:function saveState(e){this.delegate.saveState(e)}},{key:"loadState",value:function loadState(e){this.delegate.loadState(e)}},{key:"setActiveChild",value:function setActiveChild(){}},{key:"resize",value:function resize(e,t){this.delegate.resize(e,t)}},{key:"performLayout",value:function performLayout(e){this.delegate.performLayout(e,!1)}},{key:"removeDecorator",value:function removeDecorator(){this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.touchDownHandler&&(this.touchDownHandler.cancel(),delete this.touchDownHandler)}},{key:"onMouseDown",value:function onMouseDown(e){var t=null;if(e.touches){if(e.touches.length>1)return;t=e.touches[0]}else t=e;this._startDragging(t),this.previousMousePosition={x:t.clientX,y:t.clientY},this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.mouseMoveHandler=new r(window,"mousemove",this.onMouseMove.bind(this)),this.touchMoveHandler=new r(e.target,"touchmove",this.onMouseMove.bind(this)),this.mouseUpHandler=new r(window,"mouseup",this.onMouseUp.bind(this)),this.touchUpHandler=new r(e.target,"touchend",this.onMouseUp.bind(this))}},{key:"onMouseUp",value:function onMouseUp(e){this._stopDragging(e),this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler,this.touchMoveHandler.cancel(),delete this.touchMoveHandler,this.mouseUpHandler.cancel(),delete this.mouseUpHandler,this.touchUpHandler.cancel(),delete this.touchUpHandler}},{key:"_startDragging",value:function _startDragging(e){this.dialog.eventListener&&this.dialog.eventListener._onDialogDragStarted(this.dialog,e),h.disableGlobalTextSelection(this.dockManager.config.dialogRootElement)}},{key:"_stopDragging",value:function _stopDragging(e){this.dialog.eventListener&&this.dialog.eventListener._onDialogDragEnded(this.dialog,e),h.enableGlobalTextSelection(this.dockManager.config.dialogRootElement)}},{key:"onMouseMove",value:function onMouseMove(e){var t=document.body.getBoundingClientRect();if(null!=e.touches){if(e.touches.length>1)return;for(var _i2 in this.dockManager.dockWheel.wheelItems){var _n2=this.dockManager.dockWheel.wheelItems[_i2],_s=_n2.element.getBoundingClientRect();e.touches[0].clientX>_s.left-t.left&&e.touches[0].clientX<_s.left+_n2.element.clientWidth-t.left&&e.touches[0].clientY>_s.top-t.top&&e.touches[0].clientY<_s.top+_n2.element.clientHeight-t.top?_n2.onMouseMoved():_n2.active&&_n2.onMouseOut()}}var i=null;if(e.changedTouches){if(e.changedTouches.length>1)return;i=e.changedTouches[0]}else i=e;var n=new a(i.clientX,i.clientY),s=this.dockManager.checkXBounds(this.topLevelElement,n,this.previousMousePosition,!1,!1),o=this.dockManager.checkYBounds(this.topLevelElement,n,this.previousMousePosition,!1,!1);this._performDrag(s,o),this.previousMousePosition=n}},{key:"_performDrag",value:function _performDrag(e,t){var i=e+h.getPixels(this.topLevelElement.style.marginLeft),n=t+h.getPixels(this.topLevelElement.style.marginTop);this.topLevelElement.style.marginLeft=i+"px",this.topLevelElement.style.marginTop=n+"px"}},{key:"width",get:function get(){return this.delegate.width}},{key:"height",get:function get(){return this.delegate.height}},{key:"name",get:function get(){return this.delegate.name},set:function set(e){e&&(this.delegate.name=e)}}]);return u}();var m=function(){function m(){_classCallCheck(this,m);this.element=void 0,this.handleSize=6,this.cornerSize=12,this.east=!1,this.west=!1,this.north=!1,this.south=!1,this.corner=!1}_createClass(m,[{key:"adjustSize",value:function adjustSize(e,t){this.corner?(this.west&&(this.element.style.left="0px"),this.east&&(this.element.style.left=e-this.cornerSize+"px"),this.north&&(this.element.style.top="0px"),this.south&&(this.element.style.top=t-this.cornerSize+"px")):(this.west&&(this.element.style.left="0px",this.element.style.top=this.cornerSize+"px"),this.east&&(this.element.style.left=e-this.handleSize+"px",this.element.style.top=this.cornerSize+"px"),this.north&&(this.element.style.left=this.cornerSize+"px",this.element.style.top="0px"),this.south&&(this.element.style.left=this.cornerSize+"px",this.element.style.top=t-this.handleSize+"px"),this.west||this.east?this.element.style.height=t-2*this.cornerSize+"px":this.element.style.width=e-2*this.cornerSize+"px")}}]);return m}();var p=function(){function p(e,t,i){_classCallCheck(this,p);this.dialog=e,this.delegate=t,this.containerElement=t.containerElement,this.dockManager=t.dockManager,this.topLevelElement=i,this.containerType=t.containerType,this.topLevelElement.style.marginLeft=this.topLevelElement.offsetLeft+"px",this.topLevelElement.style.marginTop=this.topLevelElement.offsetTop+"px",this.minimumAllowedChildNodes=t.minimumAllowedChildNodes,this._buildResizeHandles(),this.readyToProcessNextResize=!0,this.dockSpawnResizedEvent=new CustomEvent("DockSpawnResizedEvent",{composed:!0,bubbles:!0})}_createClass(p,[{key:"setActiveChild",value:function setActiveChild(){}},{key:"_buildResizeHandles",value:function _buildResizeHandles(){this.resizeHandles=[],this._buildResizeHandle(!1,!0,!0,!1),this._buildResizeHandle(!0,!1,!1,!0),this._buildResizeHandle(!1,!0,!1,!0),this._buildResizeHandle(!0,!1,!1,!1),this._buildResizeHandle(!1,!0,!1,!1),this._buildResizeHandle(!1,!1,!0,!1),this._buildResizeHandle(!1,!1,!1,!0)}},{key:"_buildResizeHandle",value:function _buildResizeHandle(e,t,i,n){var _this3=this;var s=new m;s.east=e,s.west=t,s.north=i,s.south=n,s.element=document.createElement("div"),this.topLevelElement.appendChild(s.element);var o="",l="";i&&(o="n"),n&&(o="s"),e&&(l="e"),t&&(l="w");var a="resize-handle-"+o+l;o.length>0&&l.length>0&&(s.corner=!0),s.element.classList.add(s.corner?"resize-handle-corner":"resize-handle"),s.element.classList.add(a),this.resizeHandles.push(s),s.mouseDownHandler=new r(s.element,"mousedown",function(e){_this3.onMouseDown(s,e)}),s.touchDownHandler=new r(s.element,"touchstart",function(e){_this3.onMouseDown(s,e)})}},{key:"saveState",value:function saveState(e){this.delegate.saveState(e)}},{key:"loadState",value:function loadState(e){this.delegate.loadState(e)}},{key:"resize",value:function resize(e,t){this.delegate.resize(e,t),this._adjustResizeHandles(e,t),document.dispatchEvent(this.dockSpawnResizedEvent)}},{key:"_adjustResizeHandles",value:function _adjustResizeHandles(e,t){this.resizeHandles.forEach(function(i){i.adjustSize(e,t)})}},{key:"performLayout",value:function performLayout(e){this.delegate.performLayout(e,!1)}},{key:"destroy",value:function destroy(){this.removeDecorator(),this.delegate.destroy()}},{key:"removeDecorator",value:function removeDecorator(){}},{key:"onMouseMoved",value:function onMouseMoved(e,t){var i=null;if(t.changedTouches){if(t.changedTouches.length>1)return;i=t.changedTouches[0]}else i=t;if(!this.readyToProcessNextResize)return;this.readyToProcessNextResize=!1,this.dialog.panel&&this.dockManager.suspendLayout(this.dialog.panel);var n=new a(i.clientX,i.clientY),s=this.dockManager.checkXBounds(this.topLevelElement,n,this.previousMousePosition,e.west,e.east),o=this.dockManager.checkYBounds(this.topLevelElement,n,this.previousMousePosition,e.north,e.south);this._performDrag(e,s,o),this.previousMousePosition=n,this.readyToProcessNextResize=!0,this.dialog.panel&&this.dockManager.resumeLayout(this.dialog.panel),this.dockManager.notifyOnContainerResized(this)}},{key:"onMouseDown",value:function onMouseDown(e,t){var _this4=this;var i=null;if(t.touches){if(t.touches.length>1)return;i=t.touches[0]}else i=t;this.previousMousePosition=new a(i.clientX,i.clientY),e.mouseMoveHandler&&(e.mouseMoveHandler.cancel(),delete e.mouseMoveHandler),e.touchMoveHandler&&(e.touchMoveHandler.cancel(),delete e.touchMoveHandler),e.mouseUpHandler&&(e.mouseUpHandler.cancel(),delete e.mouseUpHandler),e.touchUpHandler&&(e.touchUpHandler.cancel(),delete e.touchUpHandler),e.mouseMoveHandler=new r(window,"mousemove",function(t){_this4.onMouseMoved(e,t)}),e.touchMoveHandler=new r(window,"touchmove",function(t){_this4.onMouseMoved(e,t)}),e.mouseUpHandler=new r(window,"mouseup",function(t){_this4.onMouseUp(e)}),e.touchUpHandler=new r(window,"touchend",function(t){_this4.onMouseUp(e)}),h.disableGlobalTextSelection(this.dockManager.config.dialogRootElement)}},{key:"onMouseUp",value:function onMouseUp(e){e.mouseMoveHandler.cancel(),e.touchMoveHandler.cancel(),e.mouseUpHandler.cancel(),e.touchUpHandler.cancel(),delete e.mouseMoveHandler,delete e.touchMoveHandler,delete e.mouseUpHandler,delete e.touchUpHandler,h.enableGlobalTextSelection(this.dockManager.config.dialogRootElement)}},{key:"_performDrag",value:function _performDrag(e,t,i){var n={};n.left=h.getPixels(this.topLevelElement.style.marginLeft),n.top=h.getPixels(this.topLevelElement.style.marginTop),n.width=this.topLevelElement.clientWidth,n.height=this.topLevelElement.clientHeight,e.east&&this._resizeEast(t,n),e.west&&this._resizeWest(t,n),e.north&&this._resizeNorth(i,n),e.south&&this._resizeSouth(i,n)}},{key:"_resizeWest",value:function _resizeWest(e,t){this._resizeContainer(e,0,-e,0,t)}},{key:"_resizeEast",value:function _resizeEast(e,t){this._resizeContainer(0,0,e,0,t)}},{key:"_resizeNorth",value:function _resizeNorth(e,t){this._resizeContainer(0,e,0,-e,t)}},{key:"_resizeSouth",value:function _resizeSouth(e,t){this._resizeContainer(0,0,0,e,t)}},{key:"_resizeContainer",value:function _resizeContainer(e,t,i,n,s){s.left+=e,s.top+=t,s.width+=i,s.height+=n;s.width=Math.max(s.width,50),s.height=Math.max(s.height,50),this.topLevelElement.style.marginLeft=s.left+"px",this.topLevelElement.style.marginTop=s.top+"px",this.resize(s.width,s.height)}},{key:"width",get:function get(){return this.delegate.width}},{key:"height",get:function get(){return this.delegate.height}},{key:"name",get:function get(){return this.delegate.name},set:function set(e){e&&(this.delegate.name=e)}}]);return p}();var g=function(){function g(e,t){_classCallCheck(this,g);this.panel=e,this.dockManager=t,this.eventListener=t,this._initialize(),this.dockManager.context.model.dialogs.push(this),this.position=t.defaultDialogPosition,this.dockManager.notifyOnCreateDialog(this),e.isDialog=!0}_createClass(g,[{key:"saveState",value:function saveState(e,t){this.position=new a(e,t),this.dockManager.notifyOnChangeDialogPosition(this,e,t)}},{key:"_initialize",value:function _initialize(){this.panel.floatingDialog=this,this.elementDialog=Object.assign(document.createElement("div"),{floatingDialog:this}),this.elementDialog.tabIndex=0,this.elementDialog.appendChild(this.panel.elementPanel),this.draggable=new u(this,this.panel,this.elementDialog,this.panel.elementTitle),this.resizable=new p(this,this.draggable,this.draggable.topLevelElement),this.dockManager.config.dialogRootElement.appendChild(this.elementDialog),this.elementDialog.classList.add("dialog-floating"),this.focusHandler=new r(this.elementDialog,"focus",this.onFocus.bind(this),!0),this.mouseDownHandler=new r(this.elementDialog,"mousedown",this.onMouseDown.bind(this),!0),this.touchDownHandler=new r(this.elementDialog,"touchstart",this.onMouseDown.bind(this)),this.keyPressHandler=new r(this.elementDialog,"keypress",this.dockManager.onKeyPressBound,!0),this.resize(this.panel.elementPanel.clientWidth,this.panel.elementPanel.clientHeight),this.isHidden=!1,this.bringToFront()}},{key:"setPosition",value:function setPosition(e,t){var i=this.dockManager.config.dialogRootElement.getBoundingClientRect();this.position=new a(e-i.left,t-i.top),this.elementDialog.style.left=e-i.left+"px",this.elementDialog.style.top=t-i.top+"px",this.dockManager.notifyOnChangeDialogPosition(this,e,t)}},{key:"getPosition",value:function getPosition(){return new a(this.position?this.position.x:0,this.position?this.position.y:0)}},{key:"onFocus",value:function onFocus(){this.dockManager.activePanel!=this.panel&&(this.dockManager.activePanel=this.panel)}},{key:"onMouseDown",value:function onMouseDown(){this.bringToFront()}},{key:"destroy",value:function destroy(){this.focusHandler&&(this.focusHandler.cancel(),delete this.focusHandler),this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.touchDownHandler&&(this.touchDownHandler.cancel(),delete this.touchDownHandler),this.keyPressHandler&&(this.keyPressHandler.cancel(),delete this.keyPressHandler),h.removeNode(this.elementDialog),this.draggable.removeDecorator(),h.removeNode(this.panel.elementPanel),h.arrayRemove(this.dockManager.context.model.dialogs,this),delete this.panel.floatingDialog}},{key:"resize",value:function resize(e,t){this.resizable.resize(e,t)}},{key:"setTitle",value:function setTitle(e){this.panel.setTitle(e)}},{key:"setTitleIcon",value:function setTitleIcon(e){this.panel.setTitleIcon(e)}},{key:"bringToFront",value:function bringToFront(){this.elementDialog.style.zIndex=this.dockManager.zIndexDialogCounter++,this.dockManager.activePanel=this.panel}},{key:"hide",value:function hide(){this.elementDialog.style.zIndex="0",this.elementDialog.style.display="none",this.isHidden||(this.isHidden=!0,this.dockManager.notifyOnHideDialog(this))}},{key:"close",value:function close(){this.hide(),this.remove(),this.dockManager.notifyOnClosePanel(this.panel),this.destroy()}},{key:"remove",value:function remove(){this.elementDialog.parentNode.removeChild(this.elementDialog)}},{key:"show",value:function show(){this.elementDialog.style.zIndex=this.dockManager.zIndexDialogCounter++,this.elementDialog.style.display="block",this.isHidden&&(this.isHidden=!1,this.dockManager.notifyOnShowDialog(this))}}],[{key:"fromElement",value:function fromElement(e,t){return new g(new c(document.getElementById(e),t),t)}}]);return g}();var v=function v(){_classCallCheck(this,v);this.escClosesWindow=!0,this.dialogRootElement=document.body,this.moveOnlyWithinDockConatiner=!1};var f=function(){function f(){_classCallCheck(this,f)}_createClass(f,[{key:"serialize",value:function serialize(e){var t=this._buildGraphInfo(e.rootNode),i=this._buildDialogsInfo(e.dialogs.sort(function(e,t){return e.elementDialog.style.zIndex-t.elementDialog.style.zIndex}));return JSON.stringify({graphInfo:t,dialogsInfo:i})}},{key:"_buildGraphInfo",value:function _buildGraphInfo(e){var _this5=this;var t={};e.container.saveState(t);var i=[];return e.children.forEach(function(e){i.push(_this5._buildGraphInfo(e))}),{containerType:e.container.containerType,state:t,children:i}}},{key:"_buildDialogsInfo",value:function _buildDialogsInfo(e){var t=[];return e.forEach(function(e){var i={},n=e.panel;n.saveState(i);var s={containerType:n.containerType,state:i,position:e.getPosition(),isHidden:e.isHidden};t.push(s)}),t}}]);return f}();var k=function(){function k(e){_classCallCheck(this,k);this.container=e,this.children=[]}_createClass(k,[{key:"detachFromParent",value:function detachFromParent(){this.parent&&(this.parent.removeChild(this),delete this.parent)}},{key:"removeChild",value:function removeChild(e){var t=this.children.indexOf(e);t>=0&&this.children.splice(t,1)}},{key:"addChild",value:function addChild(e){e.detachFromParent(),e.parent=this,this.children.push(e)}},{key:"addChildBefore",value:function addChildBefore(e,t){this._addChildWithDirection(e,t,!0)}},{key:"addChildAfter",value:function addChildAfter(e,t){this._addChildWithDirection(e,t,!1)}},{key:"_addChildWithDirection",value:function _addChildWithDirection(e,t,i){t.detachFromParent(),t.parent=this;var n=this.children.indexOf(e),s=this.children.slice(0,n),o=this.children.slice(n+1,this.children.length);this.children=s.slice(0),i?(this.children.push(t),this.children.push(e)):(this.children.push(e),this.children.push(t)),Array.prototype.push.apply(this.children,o)}},{key:"performLayout",value:function performLayout(e){var t=this.children.map(function(e){return e.container});this.container.performLayout(t,e)}},{key:"debugDumpTree",value:function debugDumpTree(e){void 0===e&&(e=0);var t=this.container.name;for(var _i3=0;_i3<e;_i3++){t="\t"+t}var i=void 0===this.parent?"null":this.parent.container.containerType;console.log(">>"+t+" ["+i+"]"),this.children.forEach(function(t){t.debugDumpTree(e+1)})}}]);return k}();var w=function(){function w(e,t,i){_classCallCheck(this,w);this.previousContainer=e,this.nextContainer=t,this.stackedVertical=i,this.barElement=document.createElement("div"),this.barElement.classList.add(i?"splitbar-horizontal":"splitbar-vertical"),this.mouseDownHandler=new r(this.barElement,"mousedown",this.onMouseDown.bind(this)),this.touchDownHandler=new r(this.barElement,"touchstart",this.onMouseDown.bind(this)),this.minPanelSize=50,this.readyToProcessNextDrag=!0,this.dockSpawnResizedEvent=new CustomEvent("DockSpawnResizedEvent",{composed:!0,bubbles:!0})}_createClass(w,[{key:"onMouseDown",value:function onMouseDown(e){if(e.touches){if(e.touches.length>1)return;e=e.touches[0]}this._startDragging(e)}},{key:"onMouseUp",value:function onMouseUp(){this._stopDragging()}},{key:"onMouseMoved",value:function onMouseMoved(e){if(!this.readyToProcessNextDrag)return;this.readyToProcessNextDrag=!1,null!=e.changedTouches&&(e=e.changedTouches[0]);var t=this.previousContainer.dockManager;t.suspendLayout(this.previousContainer),t.suspendLayout(this.nextContainer);var i=e.clientX-this.previousMouseEvent.clientX,n=e.clientY-this.previousMouseEvent.clientY;this._performDrag(i,n),this.previousMouseEvent=e,this.readyToProcessNextDrag=!0,t.resumeLayout(this.previousContainer),t.resumeLayout(this.nextContainer)}},{key:"_performDrag",value:function _performDrag(e,t){var i=this.previousContainer.containerElement.clientWidth,n=this.previousContainer.containerElement.clientHeight,s=this.nextContainer.containerElement.clientWidth,o=this.nextContainer.containerElement.clientHeight,l=this.stackedVertical?n:i,a=this.stackedVertical?o:s,h=this.stackedVertical?t:e,r=l+h,d=a-h;if(r<this.minPanelSize||d<this.minPanelSize){if(!(r<this.minPanelSize&&r>l||d<this.minPanelSize&&d>a))return}this.stackedVertical?(this.previousContainer.resize(i,r),this.nextContainer.resize(s,d)):(this.previousContainer.resize(r,n),this.nextContainer.resize(d,o)),document.dispatchEvent(this.dockSpawnResizedEvent)}},{key:"_startDragging",value:function _startDragging(e){h.disableGlobalTextSelection(this.previousContainer.dockManager.config.dialogRootElement),this.mouseMovedHandler&&(this.mouseMovedHandler.cancel(),delete this.mouseMovedHandler),this.touchMovedHandler&&(this.touchMovedHandler.cancel(),delete this.touchMovedHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.mouseMovedHandler=new r(window,"mousemove",this.onMouseMoved.bind(this)),this.mouseUpHandler=new r(window,"mouseup",this.onMouseUp.bind(this)),this.touchMovedHandler=new r(window,"touchmove",this.onMouseMoved.bind(this)),this.touchUpHandler=new r(window,"touchend",this.onMouseUp.bind(this)),this.previousMouseEvent=e}},{key:"_stopDragging",value:function _stopDragging(){h.enableGlobalTextSelection(this.previousContainer.dockManager.config.dialogRootElement),this.mouseMovedHandler&&(this.mouseMovedHandler.cancel(),delete this.mouseMovedHandler),this.touchMovedHandler&&(this.touchMovedHandler.cancel(),delete this.touchMovedHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler)}}]);return w}();var M=function(){function M(e,t){_classCallCheck(this,M);this.childContainers=e,this.stackedVertical=t,this.panelElement=document.createElement("div"),this.spiltterBars=[],this._buildSplitterDOMAndAddElements()}_createClass(M,[{key:"_buildSplitterDOMAndAddElements",value:function _buildSplitterDOMAndAddElements(){if(this.childContainers.length<=1)throw new Error("Splitter panel should contain atleast 2 panels");this.spiltterBars=[];var e=null;for(var _t=0;_t<this.childContainers.length-1;_t++){var _i4=this.childContainers[_t],_n3=this.childContainers[_t+1],_s2=new w(_i4,_n3,this.stackedVertical);this.spiltterBars.push(_s2),Array.from(this.panelElement.children).includes(_i4.containerElement)||this._insertContainerIntoPanel(_i4,e),this.panelElement.insertBefore(_s2.barElement,_i4.containerElement.nextSibling),e=_s2.barElement}var t=this.childContainers.slice(-1)[0];Array.from(this.panelElement.children).includes(t.containerElement)||this._insertContainerIntoPanel(t,e)}},{key:"performLayout",value:function performLayout(e,t){h.arrayEqual(this.childContainers,e)&&!t||(this.childContainers.forEach(function(t){e.some(function(e){return e==t})||t.containerElement&&(t.containerElement.classList.remove("splitter-container-vertical"),t.containerElement.classList.remove("splitter-container-horizontal"),h.removeNode(t.containerElement))}),this.spiltterBars.forEach(function(e){h.removeNode(e.barElement)}),this.childContainers=e,this._buildSplitterDOMAndAddElements())}},{key:"removeFromDOM",value:function removeFromDOM(){this.childContainers.forEach(function(e){e.containerElement&&(e.containerElement.classList.remove("splitter-container-vertical"),e.containerElement.classList.remove("splitter-container-horizontal"),h.removeNode(e.containerElement))}),this.spiltterBars.forEach(function(e){h.removeNode(e.barElement)})}},{key:"destroy",value:function destroy(){this.removeFromDOM(),this.panelElement.parentNode.removeChild(this.panelElement)}},{key:"_insertContainerIntoPanel",value:function _insertContainerIntoPanel(e,t){e?(e.containerElement.parentNode!=this.panelElement&&(h.removeNode(e.containerElement),t?this.panelElement.insertBefore(e.containerElement,t.nextSibling):this.panelElement.children.length>0?this.panelElement.insertBefore(e.containerElement,this.panelElement.children[0]):this.panelElement.appendChild(e.containerElement)),e.containerElement.classList.add(this.stackedVertical?"splitter-container-vertical":"splitter-container-horizontal")):console.error("container is undefined")}},{key:"setContainerRatio",value:function setContainerRatio(e,t){var i=this.stackedVertical?this.panelElement.clientHeight:this.panelElement.clientWidth,n=i*t,s=(i-n-(this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth)*this.spiltterBars.length)/i;for(var _t2=0;_t2<this.childContainers.length;_t2++){var _i5=void 0,_o=this.childContainers[_t2];_o!==e?(_i5=this.stackedVertical?_o.containerElement.parentElement.clientHeight:_o.containerElement.parentElement.clientWidth,_i5*=s):_i5=n,this.stackedVertical?_o.resize(_o.width,Math.floor(_i5)):_o.resize(Math.floor(_i5),_o.height)}}},{key:"getRatios",value:function getRatios(){var e=this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth,t=(this.stackedVertical?this.panelElement.clientHeight:this.panelElement.clientWidth)-e*this.spiltterBars.length,i=[];for(var _e=0;_e<this.childContainers.length;_e++){var _n4=this.childContainers[_e],_s3=this.stackedVertical?_n4.containerElement.clientHeight:_n4.containerElement.clientWidth;i.push(_s3/t)}return i}},{key:"setRatios",value:function setRatios(e){var t=this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth,i=(this.stackedVertical?this.panelElement.clientHeight:this.panelElement.clientWidth)-t*this.spiltterBars.length;for(var _t3=0;_t3<this.childContainers.length;_t3++){var _n5=this.childContainers[_t3],_s4=i*e[_t3];this.stackedVertical?_n5.resize(_n5.width,Math.floor(_s4)):_n5.resize(Math.floor(_s4),_n5.height)}}},{key:"resize",value:function resize(e,t){var _this6=this;if(this.childContainers.length<=1)return;var i;for(i=0;i<this.childContainers.length;i++){var _n6=this.childContainers[i];if(this.stackedVertical?_n6.resize(e,_n6.height?_n6.height:t):_n6.resize(_n6.width?_n6.width:e,t),i<this.spiltterBars.length){var _n7=this.spiltterBars[i];this.stackedVertical?_n7.barElement.style.width=e+"px":_n7.barElement.style.height=t+"px"}}var n=0;this.childContainers.forEach(function(e){var t=_this6.stackedVertical?e.height:e.width;n+=t});var s=this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth,o=this.stackedVertical?t:e,l=(o-=s*this.spiltterBars.length)/(n=Math.max(n,1)),a=0;for(i=0;i<this.childContainers.length;i++){var _e2=this.childContainers[i];"none"==_e2.containerElement.style.display&&(_e2.containerElement.style.display="block");var _t4=this.stackedVertical?_e2.containerElement.clientHeight:_e2.containerElement.clientWidth,_n8=l>1?Math.floor(_t4*l):Math.ceil(_t4*l);a+=_n8,i===this.childContainers.length-1&&(_n8+=o-a),this.stackedVertical?_e2.resize(_e2.width,_n8):_e2.resize(_n8,_e2.height)}this.panelElement.style.width=e+"px",this.panelElement.style.height=t+"px"}}]);return M}();var y=function(){function y(e,t,i,n){_classCallCheck(this,y);0!==arguments.length&&(this.name=e,this.dockManager=t,this.stackedVertical=n,this.splitterPanel=new M(i,this.stackedVertical),this.containerElement=this.splitterPanel.panelElement,this.minimumAllowedChildNodes=2)}_createClass(y,[{key:"resize",value:function resize(e,t){this.splitterPanel.resize(e,t),this._cachedWidth=e,this._cachedHeight=t}},{key:"performLayout",value:function performLayout(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;this.splitterPanel.performLayout(e,t)}},{key:"setActiveChild",value:function setActiveChild(){}},{key:"destroy",value:function destroy(){this.splitterPanel.destroy()}},{key:"setContainerRatio",value:function setContainerRatio(e,t){this.splitterPanel.setContainerRatio(e,t),this.resize(this.width,this.height)}},{key:"getRatios",value:function getRatios(){return this.splitterPanel.getRatios()}},{key:"setRatios",value:function setRatios(e){this.splitterPanel.setRatios(e),this.resize(this.width,this.height)}},{key:"saveState",value:function saveState(e){e.width=this.width,e.height=this.height}},{key:"loadState",value:function loadState(e){this.state={width:e.width,height:e.height}}},{key:"width",get:function get(){return void 0===this._cachedWidth&&(this._cachedWidth=this.splitterPanel.panelElement.clientWidth),this._cachedWidth}},{key:"height",get:function get(){return void 0===this._cachedHeight&&(this._cachedHeight=this.splitterPanel.panelElement.clientHeight),this._cachedHeight}}]);return y}();var b=function(_y){_inherits(b,_y);function b(e,t){var _this7;_classCallCheck(this,b);_this7=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,h.getNextId("horizontal_splitter_"),e,t,!1)),_this7.containerType=n.horizontal;return _this7}return b}(y);var C=function(_y2){_inherits(C,_y2);function C(e,t){var _this8;_classCallCheck(this,C);_this8=_possibleConstructorReturn(this,_getPrototypeOf(C).call(this,h.getNextId("vertical_splitter_"),e,t,!0)),_this8.containerType=n.vertical;return _this8}return C}(y);var E=function(){function E(e){var _this9=this;_classCallCheck(this,E);this.parent=e;var t=this._performUndock.bind(this);this.elementBase=document.createElement("div"),this.elementText=document.createElement("div"),this.elementCloseButton=document.createElement("div"),this.elementBase.classList.add("dockspan-tab-handle"),this.elementBase.classList.add("disable-selection"),this.elementText.classList.add("dockspan-tab-handle-text"),this.elementCloseButton.classList.add("dockspan-tab-handle-close-button"),this.elementBase.appendChild(this.elementText),this.parent.host.displayCloseButton&&this.elementBase.appendChild(this.elementCloseButton),this.parent.container._hideCloseButton&&(this.elementCloseButton.style.display="none"),this.parent.host.tabListElement.appendChild(this.elementBase);var i=e.container,n=i.getRawTitle();this.undockListener={onDockEnabled:function onDockEnabled(e){_this9.undockEnabled(e.state)},onHideCloseButton:function onHideCloseButton(e){_this9.hideCloseButton(e.state)}},this.eventListeners=[],i.addListener(this.undockListener),this.elementText.innerHTML=n,this.elementText.title=this.elementText.innerText,this._bringToFront(this.elementBase),this.undockInitiator=new d(this.elementBase,t),this.undockInitiator.enabled=!0,this.mouseDownHandler=new r(this.elementBase,"mousedown",this.onMouseDown.bind(this)),this.closeButtonHandler=new r(this.elementCloseButton,"mousedown",this.onCloseButtonClicked.bind(this)),this.auxClickHandler=new r(this.elementBase,"auxclick",this.onCloseButtonClicked.bind(this)),this.contextMenuHandler=new r(this.elementBase,"contextmenu",this.oncontextMenuClicked.bind(this)),this.zIndexCounter=e.host.dockManager.zIndexTabHandle}_createClass(E,[{key:"addListener",value:function addListener(e){this.eventListeners.push(e)}},{key:"removeListener",value:function removeListener(e){this.eventListeners.splice(this.eventListeners.indexOf(e),1)}},{key:"undockEnabled",value:function undockEnabled(e){this.undockInitiator.enabled=e}},{key:"oncontextMenuClicked",value:function oncontextMenuClicked(e){e.preventDefault(),!this._ctxMenu&&E.createContextMenuContentCallback?(this._ctxMenu=document.createElement("div"),this._ctxMenu.className="dockspab-tab-handle-context-menu",E.createContextMenuContentCallback(this,this._ctxMenu,this.parent.container.dockManager.context.model.documentManagerNode.children),this._ctxMenu.style.left=e.pageX+"px",this._ctxMenu.style.top=e.pageY+"px",document.body.appendChild(this._ctxMenu),this._windowsContextMenuCloseBound=this.windowsContextMenuClose.bind(this),window.addEventListener("mouseup",this._windowsContextMenuCloseBound)):this.closeContextMenu()}},{key:"closeContextMenu",value:function closeContextMenu(){this._ctxMenu&&(document.body.removeChild(this._ctxMenu),delete this._ctxMenu,window.removeEventListener("mouseup",this._windowsContextMenuCloseBound))}},{key:"windowsContextMenuClose",value:function windowsContextMenuClose(e){var t=e.composedPath();for(var _e3 in t){if(t[_e3]==this._ctxMenu)return}this.closeContextMenu()}},{key:"onMouseDown",value:function onMouseDown(e){this.parent.onSelected(),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.touchUpHandler&&(this.touchUpHandler.cancel(),delete this.touchUpHandler),this.stargDragPosition=e.clientX,this.mouseMoveHandler=new r(window,"mousemove",this.onMouseMove.bind(this)),this.touchMoveHandler=new r(window,"touchmove",this.onMouseMove.bind(this)),this.mouseUpHandler=new r(window,"mouseup",this.onMouseUp.bind(this)),this.touchUpHandler=new r(window,"touchend",this.onMouseUp.bind(this))}},{key:"onMouseUp",value:function onMouseUp(e){this.elementBase&&this.elementBase.classList.remove("dockspan-tab-handle-dragged"),this.dragged=!1,this.mouseMoveHandler&&this.mouseMoveHandler.cancel(),this.touchMoveHandler&&this.touchMoveHandler.cancel(),this.mouseUpHandler&&this.mouseUpHandler.cancel(),this.touchUpHandler&&this.touchUpHandler.cancel(),delete this.mouseMoveHandler,delete this.touchMoveHandler,delete this.mouseUpHandler,delete this.touchUpHandler}},{key:"moveTabEvent",value:function moveTabEvent(e,t){e.eventListeners.forEach(function(i){i.onMoveTab&&i.onMoveTab({self:e,state:t})})}},{key:"onMouseMove",value:function onMouseMove(e){if(!(Math.abs(this.stargDragPosition-e.clientX)<10)&&null!=this.elementBase){this.elementBase.classList.add("dockspan-tab-handle-dragged"),this.dragged=!0,this.prev=this.current,this.current=e.clientX,this.direction=this.current-this.prev;var _t5=this.elementBase.getBoundingClientRect(),_i6=this.direction<0?{state:"left",bound:_t5.left,rect:_t5}:{state:"right",bound:_t5.right,rect:_t5};(e.clientX<_t5.left&&this.direction<0||e.clientX>_t5.left+_t5.width&&this.direction>0)&&this.moveTabEvent(this,_i6.state)}}},{key:"hideCloseButton",value:function hideCloseButton(e){this.elementCloseButton.style.display=e?"none":"block"}},{key:"updateTitle",value:function updateTitle(){if(this.parent.container instanceof c){var _e4=this.parent.container.getRawTitle();this.elementText.innerHTML=_e4}}},{key:"destroy",value:function destroy(){this.parent.container.removeListener(this.undockListener),this.mouseDownHandler.cancel(),this.closeButtonHandler.cancel(),this.auxClickHandler.cancel(),this.mouseUpHandler&&this.mouseUpHandler.cancel(),this.touchUpHandler&&this.touchUpHandler.cancel(),this.contextMenuHandler&&this.contextMenuHandler.cancel(),h.removeNode(this.elementBase),h.removeNode(this.elementCloseButton),delete this.elementBase,delete this.elementCloseButton}},{key:"_performUndock",value:function _performUndock(e,t){if("panel"===this.parent.container.containerType){return this.undockInitiator.enabled=!1,this.parent.container.performUndockToDialog(e,t)}return null}},{key:"onCloseButtonClicked",value:function onCloseButtonClicked(e){if(2!==e.button&&"panel"===this.parent.container.containerType){this.parent.container.close()}}},{key:"setSelected",value:function setSelected(e){e?this.elementBase.classList.add("dockspan-tab-handle-selected"):(this.elementBase.classList.remove("dockspan-tab-handle-selected"),this.elementBase.classList.remove("dockspan-tab-handle-active"))}},{key:"setActive",value:function setActive(e){this.elementBase&&(e?this.elementBase.classList.add("dockspan-tab-handle-active"):this.elementBase.classList.remove("dockspan-tab-handle-active"))}},{key:"setZIndex",value:function setZIndex(e){this.elementBase.style.zIndex=e}},{key:"_bringToFront",value:function _bringToFront(e){e.style.zIndex=this.zIndexCounter,this.zIndexCounter++}}]);return E}();E.createContextMenuContentCallback=function(e,t,i){var n=document.createElement("div");n.innerText="Close all documents",t.append(n);var o=document.createElement("div");o.innerText="Close all documents but this",t.append(o),n.onclick=function(){for(var _e5=i.length-1;_e5>=0;_e5--){var _t6=i[_e5].container;_t6.panelType==s.document&&_t6.close()}e.closeContextMenu()},o.onclick=function(){for(var _t7=i.length-1;_t7>=0;_t7--){var _n9=i[_t7].container;e.parent.container!=_n9&&_n9.panelType==s.document&&_n9.close()}e.closeContextMenu()}};var H=function(){function H(e,t){_classCallCheck(this,H);0!==arguments.length&&(this.selected=!1,this.host=e,this.container=t,this.handle=new E(this),this.containerElement=t.containerElement,t instanceof c&&(this.panel=t,this.panel.onTitleChanged=this.onTitleChanged.bind(this)),t.tabPage=this)}_createClass(H,[{key:"onTitleChanged",value:function onTitleChanged(){this.handle.updateTitle()}},{key:"destroy",value:function destroy(){if(this.handle.destroy(),this.container instanceof c){delete this.container.onTitleChanged}this.host.dockManager.activePanel==this.panel&&(this.host.dockManager.activePanel=null),this.container.tabPage=null}},{key:"onSelected",value:function onSelected(){if(this.host.onTabPageSelected(this),this.container instanceof c){this.container.dockManager.notifyOnTabChange(this)}}},{key:"setSelected",value:function setSelected(e){if(this.selected=e,this.handle.setSelected(e),this._initContent||this.host.contentElement.appendChild(this.containerElement),this._initContent=!0,this.selected){this.containerElement.style.display="block";var _e6=this.host.contentElement.clientWidth,_t8=this.host.contentElement.clientHeight;this.container.resize(_e6,_t8),this.host.dockManager.activePanel=this.container}else this.containerElement.style.display="none"}},{key:"resize",value:function resize(e,t){this.container.resize(e,t)}}]);return H}();!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(o||(o={}));var D=function(){function D(e,t,i){var _this10=this;_classCallCheck(this,D);if(void 0===t&&(t=o.BOTTOM),void 0===i&&(i=!1),this.dockManager=e,this.tabStripDirection=t,this.displayCloseButton=i,this.pages=[],this.eventListeners=[],this.tabHandleListener={onMoveTab:function onMoveTab(e){_this10.onMoveTab(e)}},this.hostElement=document.createElement("div"),this.tabListElement=document.createElement("div"),this.separatorElement=document.createElement("div"),this.contentElement=document.createElement("div"),this.contentElement.tabIndex=0,this.createTabPage=this._createDefaultTabPage,this.tabStripDirection===o.BOTTOM)this.hostElement.appendChild(this.contentElement),this.hostElement.appendChild(this.separatorElement),this.hostElement.appendChild(this.tabListElement);else{if(this.tabStripDirection!==o.TOP)throw new Error("Only top and bottom tab strip orientations are supported");this.hostElement.appendChild(this.tabListElement),this.hostElement.appendChild(this.separatorElement),this.hostElement.appendChild(this.contentElement)}this.hostElement.classList.add("dockspan-tab-host"),this.tabListElement.classList.add("dockspan-tab-handle-list-container"),this.separatorElement.classList.add("dockspan-tab-handle-content-seperator"),this.contentElement.classList.add("dockspan-tab-content"),this.contentElement.tabIndex=0,this.focusHandler=new r(this.contentElement,"focus",this.onFocus.bind(this),!0),this.mouseDownHandler=new r(this.contentElement,"mousedown",this.onMousedown.bind(this),!0)}_createClass(D,[{key:"onFocus",value:function onFocus(){this.activeTab&&this.dockManager.activePanel!=this.activeTab.panel&&(this.dockManager.activePanel=this.activeTab.panel)}},{key:"setActive",value:function setActive(e){e?this.separatorElement.classList.add("dockspan-tab-handle-content-seperator-active"):this.separatorElement.classList.remove("dockspan-tab-handle-content-seperator-active"),this.activeTab&&this.activeTab.handle.setActive(e)}},{key:"onMousedown",value:function onMousedown(){this.activeTab&&this.dockManager.activePanel!=this.activeTab.panel&&(this.dockManager.activePanel=this.activeTab.panel)}},{key:"onMoveTab",value:function onMoveTab(e){var t=Array.prototype.slice.call(this.tabListElement.childNodes).indexOf(e.self.elementBase);this.change(this,e.self,e.state,t)}},{key:"performTabsLayout",value:function performTabsLayout(e){this.pages=h.orderByIndexes(this.pages,e);var t=this.tabListElement.childNodes,i=[];for(var _e7 in t){1===t[_e7].nodeType&&i.push(t[_e7])}i=h.orderByIndexes(i,e);for(var _e8=0;_e8<i.length;++_e8){this.tabListElement.appendChild(i[_e8])}this.activeTab&&this.onTabPageSelected(this.activeTab)}},{key:"getActiveTab",value:function getActiveTab(){return this.activeTab}},{key:"addListener",value:function addListener(e){this.eventListeners.push(e)}},{key:"removeListener",value:function removeListener(e){this.eventListeners.splice(this.eventListeners.indexOf(e),1)}},{key:"change",value:function change(e,t,i,n){this.eventListeners.forEach(function(s){s.onChange&&s.onChange({host:e,handle:t,state:i,index:n})})}},{key:"_createDefaultTabPage",value:function _createDefaultTabPage(e,t){return new H(e,t)}},{key:"setActiveTab",value:function setActiveTab(e){var t;this.pages.forEach(function(i){i.container===e&&(t=i)}),this.pages.length>0&&t&&(this.onTabPageSelected(t),this.dockManager.activePanel=e)}},{key:"resize",value:function resize(e,t){var _this11=this;this.hostElement.style.width=e+"px",this.hostElement.style.height=t+"px";var i=this.tabListElement.clientHeight;this._resizeRequested||requestAnimationFrame(function(){return _this11.resizeTabListElement(e,t)}),this._resizeRequested=!0;var n=this.separatorElement.clientHeight,s=t-i-n;this.contentElement.style.height=s+"px",this.activeTab&&this.activeTab.resize(e,s)}},{key:"resizeTabListElement",value:function resizeTabListElement(e,t){var _this12=this;if(this._resizeRequested=!1,0===this.pages.length)return;var i=0;this.pages.forEach(function(e){var t=e.handle;t.elementBase.style.width="",i+=t.elementBase.clientWidth});var n=e/i;n>1.2||this.pages.forEach(function(e,t){var i=e.handle,s=n*i.elementBase.clientWidth;t===_this12.pages.length-1&&(s-=5),i.elementBase.style.width=s+"px"})}},{key:"performLayout",value:function performLayout(e){var _this13=this;this.pages.forEach(function(t){if(!e.some(function(e){return e==t.container})){t.handle.removeListener(_this13.tabHandleListener),t.destroy();var _e9=_this13.pages.indexOf(t);_e9>-1&&_this13.pages.splice(_e9,1)}});var t=this.activeTab;delete this.activeTab;var i=e.filter(function(e){return"panel"===e.containerType});i.length>0?(i.forEach(function(e){var i=null;_this13.pages.some(function(t){return t.container==e&&(i=t,!0)})||((i=_this13.createTabPage(_this13,e)).handle.addListener(_this13.tabHandleListener),_this13.pages.push(i)),t&&i.container===t.container&&(_this13.activeTab=i)}),this._setTabHandlesVisible(!0)):this._setTabHandlesVisible(!1),this.activeTab&&this.onTabPageSelected(this.activeTab)}},{key:"_setTabHandlesVisible",value:function _setTabHandlesVisible(e){this.tabListElement.style.display=e?"flex":"none",this.separatorElement.style.display=e?"block":"none"}},{key:"onTabPageSelected",value:function onTabPageSelected(e){this.activeTab=e,this.pages.forEach(function(t){var i=t===e;t.setSelected(i)});var t=1,i=this.dockManager.zIndexTabHost;this.pages.forEach(function(n){n.handle.setZIndex(i),n===e&&(t=-1),i+=t})}}]);return D}();var x=function(){function x(e,t){var _this14=this;_classCallCheck(this,x);void 0===t&&(t=o.BOTTOM),this.dockManager=e,this.tabOrientation=t,this.name=h.getNextId("fill_"),this.element=document.createElement("div"),this.containerElement=this.element,this.containerType=n.fill,this.minimumAllowedChildNodes=2,this.element.classList.add("dock-container"),this.element.classList.add("dock-container-fill"),this.tabHost=new D(e,this.tabOrientation),this.tabHostListener={onChange:function onChange(e){_this14.dockManager._requestTabReorder(_this14,e)}},this.tabHost.addListener(this.tabHostListener),this.element.appendChild(this.tabHost.hostElement)}_createClass(x,[{key:"setActiveChild",value:function setActiveChild(e){this.tabHost.setActiveTab(e)}},{key:"resize",value:function resize(e,t){this.element.style.width=e+"px",this.element.style.height=t+"px",this.tabHost.resize(e,t)}},{key:"performLayout",value:function performLayout(e){this.tabHost.performLayout(e)}},{key:"destroy",value:function destroy(){h.removeNode(this.element)&&delete this.element}},{key:"saveState",value:function saveState(e){e.width=this.width,e.height=this.height}},{key:"loadState",value:function loadState(e){this.state={width:e.width,height:e.height}}},{key:"width",get:function get(){return this.element.clientWidth},set:function set(e){this.element.style.width=e+"px"}},{key:"height",get:function get(){return this.element.clientHeight},set:function set(e){this.element.style.height=e+"px"}}]);return x}();var T=function(){function T(e){_classCallCheck(this,T);this._forceResizeCompositeContainer=function(e){var t=e.containerElement.clientWidth,i=e.containerElement.clientHeight;e.resize(t,i)},this.dockManager=e}_createClass(T,[{key:"dockLeft",value:function dockLeft(e,t){this._performDock(e,t,"horizontal",!0)}},{key:"dockRight",value:function dockRight(e,t){this._performDock(e,t,"horizontal",!1)}},{key:"dockUp",value:function dockUp(e,t){this._performDock(e,t,"vertical",!0)}},{key:"dockDown",value:function dockDown(e,t){this._performDock(e,t,"vertical",!1)}},{key:"dockFill",value:function dockFill(e,t){this._performDock(e,t,"fill",!1)}},{key:"undock",value:function undock(e){var t=e.parent;if(!t)throw new Error("Cannot undock.  panel is not a leaf node");var i=t.children.indexOf(e);if(e.detachFromParent(),t.children.length<t.container.minimumAllowedChildNodes){var _e10=t.parent;for(var _i7=0;_i7<t.children.length;_i7++){var _n10=t.children[_i7];if(_e10){_e10.addChildAfter(t,_n10),t.detachFromParent();var _i8=t.container.containerElement.clientWidth,_s5=t.container.containerElement.clientHeight;t.container.destroy(),_n10.container.resize(_i8,_s5),_e10.performLayout(!1)}else t.detachFromParent(),t.container.destroy(),this.dockManager.setRootNode(_n10)}}else if(t.performLayout(!1),t.children.length>0){var _e11=t.children[Math.max(0,i-1)];t.container.setActiveChild(_e11.container)}this.dockManager.invalidate(),this.dockManager.notifyOnUnDock(e)}},{key:"close",value:function close(e){var t=e.parent;if(!t)throw new Error("Cannot undock.  panel is not a leaf node");var i=!1;if(t.children.length>0&&null!=t.container.tabHost){i=t.container.tabHost.getActiveTab().container==e.container}var n=t.children.indexOf(e);if(e.detachFromParent(),t.children.length<t.container.minimumAllowedChildNodes){var _e12=t.parent;for(var _i9=0;_i9<t.children.length;_i9++){var _n11=t.children[_i9];if(_e12){_e12.addChildAfter(t,_n11),t.detachFromParent();var _i10=t.container.containerElement.clientWidth,_s6=t.container.containerElement.clientHeight;_n11.container.resize(_i10,_s6),t.container.destroy(),_e12.performLayout(!1)}else t.detachFromParent(),t.container.destroy(),this.dockManager.setRootNode(_n11)}}else if(t.performLayout(!1),i){var _e13=t.children[Math.max(0,n-1)];null!=_e13&&t.container.setActiveChild(_e13.container)}this.dockManager.invalidate(),this.dockManager.notifyOnUnDock(e)}},{key:"reorderTabs",value:function reorderTabs(e,t,i,n){var s=e.children.length,o="left"===i?n:n+1;if("right"==i&&o>=e.children.length)return;if("left"==i&&0==o)return;var l=Array.apply(null,{length:s}).map(Number.call,Number),a=l.splice(o,1)[0];l.splice("left"===i?n-1:n,0,a),e.children=h.orderByIndexes(e.children,l),e.container.tabHost.performTabsLayout(l),this.dockManager.notifyOnTabsReorder(e)}},{key:"_performDock",value:function _performDock(e,t,i,n){if(e.parent&&"fill"===e.parent.container.containerType&&(e=e.parent),"fill"===i&&"fill"===e.container.containerType)return e.addChild(t),e.performLayout(!1),e.container.setActiveChild(t.container),this.dockManager.invalidate(),void this.dockManager.notifyOnDock(t);var s,o,l;if(e===this.dockManager.context.model.rootNode)return n?(s=this._createDockContainer(i,t,e),(o=new k(s)).addChild(t),o.addChild(e)):(s=this._createDockContainer(i,e,t),(o=new k(s)).addChild(e),o.addChild(t)),this.dockManager.setRootNode(o),this.dockManager.rebuildLayout(this.dockManager.context.model.rootNode),o.container.setActiveChild(t.container),this.dockManager.invalidate(),void this.dockManager.notifyOnDock(t);if(e.parent.container.containerType!==i){l=e.parent;var _a=e.container.containerElement.clientWidth,_r=e.container.containerElement.clientHeight,_d=l.container.containerElement.clientWidth,_c=l.container.containerElement.clientHeight;s=this._createDockContainer(i,t,e),o=new k(s),l.addChildAfter(e,o),e.detachFromParent(),h.removeNode(e.container.containerElement),n?(o.addChild(t),o.addChild(e)):(o.addChild(e),o.addChild(t)),l.performLayout(!1),o.performLayout(!0),o.container.setActiveChild(t.container),o.container.resize(_a,_r),l.container.resize(_d,_c)}else l=e.parent,n?l.addChildBefore(e,t):l.addChildAfter(e,t),l.performLayout(!1),l.container.setActiveChild(t.container);var a=t.container.containerElement.clientWidth,r=t.container.containerElement.clientHeight;t.container.resize(a,r),this.dockManager.invalidate(),this.dockManager.notifyOnDock(t)}},{key:"_createDockContainer",value:function _createDockContainer(e,t,i){if("horizontal"===e)return new b(this.dockManager,[t.container,i.container]);if("vertical"===e)return new C(this.dockManager,[t.container,i.container]);if("fill"===e)return new x(this.dockManager);throw new Error("Failed to create dock container of type: "+e)}},{key:"getDockBounds",value:function getDockBounds(e,t,i,n){var s,o,l,a;if("fill"===i){var _t9=e.container.containerElement,_i11=this.dockManager.element.getBoundingClientRect(),_n12=_t9.getBoundingClientRect();return{x:_n12.left-_i11.left,y:_n12.top-_i11.top,width:_t9.clientWidth,height:_t9.clientHeight}}e.parent&&"fill"===e.parent.container.containerType&&(e=e.parent);var h=!1;e.parent&&e.parent.container.containerType===i?(o=(s=e.parent).children.length,l=s.children.indexOf(e)+(n?0:1)):(s=e,o=1,l=n?0:1,h=!0);var r=0,d=0;if("vertical"===i||"horizontal"===i){var _e14=this._getVaringDimension(s.container,i)-5*(o-1),_a2=this._getVaringDimension(t,i),_c2=_e14/(_e14+_a2);if(r=_a2*_c2,h)d=n?0:_e14*_c2;else{for(var _e15=0;_e15<l;_e15++){d+=this._getVaringDimension(s.children[_e15].container,i)}d*=_c2}}a={};var c=this.dockManager.element.getBoundingClientRect(),u=s.container.containerElement.getBoundingClientRect();return"vertical"===i?(a.x=u.left-c.left,a.y=u.top-c.top+d,a.width=s.container.width,a.height=r):"horizontal"===i&&(a.x=u.left-c.left+d,a.y=u.top-c.top,a.width=r,a.height=s.container.height),a}},{key:"_getVaringDimension",value:function _getVaringDimension(e,t){return"vertical"===t?e.height:"horizontal"===t?e.width:0}}]);return T}();var _=function(){function _(e,t){_classCallCheck(this,_);this.wheel=e,this.id=t;var i=t.replace("-s","");this.element=document.createElement("div"),this.element.classList.add("dock-wheel-item"),this.element.classList.add("disable-selection"),this.element.classList.add("dock-wheel-"+i),this.element.classList.add("dock-wheel-"+i+"-icon"),this.hoverIconClass="dock-wheel-"+i+"-icon-hover",this.mouseOverHandler=new r(this.element,"mouseover",this.onMouseMoved.bind(this)),this.mouseOutHandler=new r(this.element,"mouseout",this.onMouseOut.bind(this)),this.active=!1}_createClass(_,[{key:"onMouseMoved",value:function onMouseMoved(){this.active=!0,this.element.classList.add(this.hoverIconClass),this.wheel.onMouseOver(this)}},{key:"onMouseOut",value:function onMouseOut(){this.active=!1,this.element.classList.remove(this.hoverIconClass),this.wheel.onMouseOut()}}]);return _}();!function(e){e.left="left",e.right="right",e.top="top",e.down="down",e.fill="fill",e["left-s"]="left-s",e["right-s"]="right-s",e["top-s"]="top-s",e["down-s"]="down-s"}(l||(l={}));var L=function(){function L(e){_classCallCheck(this,L);this.dockManager=e,this.elementMainWheel=document.createElement("div"),this.elementSideWheel=document.createElement("div"),this.wheelItems={};for(var _e16 in l){this.wheelItems[_e16]=new _(this,_e16),"-s"===_e16.substr(-2,2)?this.elementSideWheel.appendChild(this.wheelItems[_e16].element):this.elementMainWheel.appendChild(this.wheelItems[_e16].element)}this.elementMainWheel.classList.add("dock-wheel-base"),this.elementSideWheel.classList.add("dock-wheel-base"),this.elementMainWheel.style.zIndex=String(9e6+1),this.elementSideWheel.style.zIndex=String(9e6),this.elementPanelPreview=document.createElement("div"),this.elementPanelPreview.classList.add("dock-wheel-panel-preview"),this.elementPanelPreview.style.zIndex=String(9e6-1),this.activeDialog=void 0,this._activeNode=void 0,this._visible=!1}_createClass(L,[{key:"showWheel",value:function showWheel(){if(this._visible=!0,!this.activeNode)return h.removeNode(this.elementMainWheel),void h.removeNode(this.elementSideWheel);var e=this.activeNode.container.containerElement,t=e.clientWidth,i=e.clientHeight,n=Math.floor(t/2),s=Math.floor(i/2);this.elementMainWheel.style.left=n+"px",this.elementMainWheel.style.top=s+"px";var o=this.dockManager.element.clientWidth,a=this.dockManager.element.clientHeight;h.removeNode(this.elementMainWheel),h.removeNode(this.elementSideWheel),e.appendChild(this.elementMainWheel),this.dockManager.element.appendChild(this.elementSideWheel),this._setWheelButtonPosition(l["left-s"],20,-a/2),this._setWheelButtonPosition(l["right-s"],o-40,-a/2),this._setWheelButtonPosition(l["top-s"],o/2,20-a),this._setWheelButtonPosition(l["down-s"],o/2,-20)}},{key:"_setWheelButtonPosition",value:function _setWheelButtonPosition(e,t,i){var n=this.wheelItems[e],s=n.element.clientWidth/2,o=n.element.clientHeight/2,l=Math.floor(t-s),a=Math.floor(i-o);n.element.style.marginLeft=l+"px",n.element.style.marginTop=a+"px"}},{key:"hideWheel",value:function hideWheel(){this._visible=!1,this.activeNode=void 0,h.removeNode(this.elementMainWheel),h.removeNode(this.elementSideWheel),h.removeNode(this.elementPanelPreview);for(var _e17 in this.wheelItems){this.wheelItems[_e17].active=!1}}},{key:"onMouseOver",value:function onMouseOver(e){if(!this.activeDialog)return;var t,i=this.dockManager.context.model.rootNode;e.id===l.top?t=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"vertical",!0):e.id===l.down?t=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"vertical",!1):e.id===l.left?t=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"horizontal",!0):e.id===l.right?t=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"horizontal",!1):e.id===l.fill?t=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"fill",!1):e.id===l["top-s"]?t=this.dockManager.layoutEngine.getDockBounds(i,this.activeDialog.panel,"vertical",!0):e.id===l["down-s"]?t=this.dockManager.layoutEngine.getDockBounds(i,this.activeDialog.panel,"vertical",!1):e.id===l["left-s"]?t=this.dockManager.layoutEngine.getDockBounds(i,this.activeDialog.panel,"horizontal",!0):e.id===l["right-s"]&&(t=this.dockManager.layoutEngine.getDockBounds(i,this.activeDialog.panel,"horizontal",!1)),t&&(this.dockManager.element.appendChild(this.elementPanelPreview),this.elementPanelPreview.style.left=Math.round(t.x)+"px",this.elementPanelPreview.style.top=Math.round(t.y)+"px",this.elementPanelPreview.style.width=Math.round(t.width)+"px",this.elementPanelPreview.style.height=Math.round(t.height)+"px")}},{key:"onMouseOut",value:function onMouseOut(){h.removeNode(this.elementPanelPreview)}},{key:"onDialogDropped",value:function onDialogDropped(e){var t=this._getActiveWheelItem();t&&this._handleDockRequest(t,e)}},{key:"_getActiveWheelItem",value:function _getActiveWheelItem(){for(var _e18 in this.wheelItems){var _t10=this.wheelItems[_e18];if(_t10.active)return _t10}}},{key:"_handleDockRequest",value:function _handleDockRequest(e,t){e.active=!1,e.element.classList.remove(e.hoverIconClass),this.activeNode&&(e.id===l.left?this.dockManager.dockDialogLeft(this.activeNode,t):e.id===l.right?this.dockManager.dockDialogRight(this.activeNode,t):e.id===l.top?this.dockManager.dockDialogUp(this.activeNode,t):e.id===l.down?this.dockManager.dockDialogDown(this.activeNode,t):e.id===l.fill?this.dockManager.dockDialogFill(this.activeNode,t):e.id===l["left-s"]?this.dockManager.dockDialogLeft(this.dockManager.context.model.rootNode,t):e.id===l["right-s"]?this.dockManager.dockDialogRight(this.dockManager.context.model.rootNode,t):e.id===l["top-s"]?this.dockManager.dockDialogUp(this.dockManager.context.model.rootNode,t):e.id===l["down-s"]&&this.dockManager.dockDialogDown(this.dockManager.context.model.rootNode,t))}},{key:"activeNode",get:function get(){return this._activeNode},set:function set(e){var t=this._activeNode;this._activeNode=e,t!==this._activeNode&&this._visible&&this.showWheel()}}]);return L}();var P=function P(){_classCallCheck(this,P);this.rootNode=this.documentManagerNode=void 0};var z=function(_H){_inherits(z,_H);function z(e,t){var _this15;_classCallCheck(this,z);_this15=_possibleConstructorReturn(this,_getPrototypeOf(z).call(this,e,t)),"panel"===_this15.container.containerType&&(_this15.panel=t,_this15.containerElement=_this15.panel.elementContent,h.removeNode(_this15.containerElement));return _this15}_createClass(z,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(z.prototype),"destroy",this).call(this),h.removeNode(this.containerElement),this.panel.elementContentHost.appendChild(this.containerElement)}}]);return z}(H);var B=function(_x){_inherits(B,_x);function B(e){var _this16;_classCallCheck(this,B);_this16=_possibleConstructorReturn(this,_getPrototypeOf(B).call(this,e,o.TOP)),_this16.minimumAllowedChildNodes=0,_this16.element.classList.add("document-manager"),_this16.tabHost.createTabPage=_this16._createDocumentTabPage,_this16.tabHost.displayCloseButton=!0;return _this16}_createClass(B,[{key:"_createDocumentTabPage",value:function _createDocumentTabPage(e,t){return new z(e,t)}},{key:"saveState",value:function saveState(e){_get(_getPrototypeOf(B.prototype),"saveState",this).call(this,e),e.documentManager=!0}},{key:"selectedTab",value:function selectedTab(){return this.tabHost.activeTab}}]);return B}(x);var N=function N(e){_classCallCheck(this,N);this.dockManager=e,this.model=new P,this.documentManagerView=new B(this.dockManager)};var U=function(){function U(e){_classCallCheck(this,U);this.dockManager=e}_createClass(U,[{key:"deserialize",value:function deserialize(e){var t=JSON.parse(e),i=new P;return i.rootNode=this._buildGraph(t.graphInfo),i.dialogs=this._buildDialogs(t.dialogsInfo),i.documentManagerNode=this.documentManagerNode,i}},{key:"_buildGraph",value:function _buildGraph(e){var _this17=this;var t=e.children,i=[];t.forEach(function(e){var t=_this17._buildGraph(e);null!==t&&i.push(t)});var n=this._createContainer(e,i);if(null===n)return null;var s=new k(n);return n instanceof B&&(this.documentManagerNode=s),s.children=i,s.children.reverse().forEach(function(e){e.parent=s}),s.children.reverse(),s}},{key:"_createContainer",value:function _createContainer(e,t){var i,n=e.containerType,s=e.state,o=[];if(t.forEach(function(e){o.push(e.container)}),"panel"===n){if(!(i=c.loadFromState(s,this.dockManager)).prepareForDocking)return null;i.prepareForDocking(),h.removeNode(i.elementPanel)}else if("horizontal"===n)i=new b(this.dockManager,o);else if("vertical"===n)i=new C(this.dockManager,o);else{if("fill"!==n)throw new Error("Cannot create dock container of unknown type: "+n);i=s.documentManager?new B(this.dockManager):new x(this.dockManager)}return i.loadState(s),i}},{key:"_buildDialogs",value:function _buildDialogs(e){var _this18=this;var t=[];return e.forEach(function(e){var i,n=e.containerType,s=e.state;if("panel"===n&&(i=c.loadFromState(s,_this18.dockManager)).prepareForDocking){h.removeNode(i.elementPanel),i.isDialog=!0;var _n13=new g(i,_this18.dockManager);(e.position.x>document.body.clientWidth||e.position.y>document.body.clientHeight-70)&&(e.position.x=20,e.position.y=70),_n13.setPosition(e.position.x,e.position.y),_n13.isHidden=e.isHidden,_n13.isHidden&&_n13.hide(),t.push(_n13)}}),t}}]);return U}();var S=function(){function S(e,t){_classCallCheck(this,S);if(void 0===e)throw new Error("Invalid Dock Manager element provided");this._config=Object.assign(new v,t),this.element=e,this.context=this.dockWheel=this.layoutEngine=this.mouseMoveHandler=this.touchMoveHandler=void 0,this.layoutEventListeners=[],this.defaultDialogPosition=new a(0,0)}_createClass(S,[{key:"initialize",value:function initialize(){this.backgroundContext=this.element.children[0],this.context=new N(this);var e=new k(this.context.documentManagerView);this.context.model.rootNode=e,this.context.model.documentManagerNode=e,this.context.model.dialogs=[],this.setRootNode(this.context.model.rootNode),this.resize(this.element.clientWidth,this.element.clientHeight),this.dockWheel=new L(this),this.layoutEngine=new T(this),this._undockEnabled=!0,this.rebuildLayout(this.context.model.rootNode),this.zIndexCounter=1001,this.zIndexTabHost=1e3,this.zIndexTabHandle=100,this.zIndexDialogCounter=10001,null!=this.backgroundContext&&this.context.model.rootNode.container.tabHost.hostElement.insertBefore(this.backgroundContext,this.context.model.rootNode.container.tabHost.hostElement.firstChild),this.onKeyPressBound=this.onKeyPress.bind(this),this.element.addEventListener("keydown",this.onKeyPressBound)}},{key:"onKeyPress",value:function onKeyPress(e){if(this._config.escClosesWindow&&"Escape"==e.key&&this.activePanel&&!this.activePanel._hideCloseButton){var _e19=this.activePanel;this.activePanel=null,_e19.close()}}},{key:"checkXBounds",value:function checkXBounds(e,t,i,n,s){if(this._config.moveOnlyWithinDockConatiner)return this.checkXBoundsWithinDockContainer(e,t,i,n,s);var o=Math.floor(t.x-i.x),l=e.offsetLeft+e.offsetWidth+o<40,a=e.offsetLeft+o>window.innerWidth-40;if(l){i.x=t.x,o=0;var _n14=40-(e.offsetWidth+e.offsetLeft);_n14>0&&(o=_n14)}else if(a){i.x=t.x,o=0;var _n15=window.innerWidth-40-e.offsetLeft;_n15>0&&(o=_n15)}return o}},{key:"checkXBoundsWithinDockContainer",value:function checkXBoundsWithinDockContainer(e,t,i,n,s){var o=t.x-i.x,l=this.element.getBoundingClientRect(),a=e.getBoundingClientRect(),h=o<0&&a.left+o<l.left&&!s,r=o>0&&a.right+o>l.right&&!n;return h?(t.x-=o,o=l.left-a.left,t.x-=o):r&&(t.x-=o,o=l.right-a.right,t.x-=o),o}},{key:"checkYBounds",value:function checkYBounds(e,t,i,n,s){if(this._config.moveOnlyWithinDockConatiner)return this.checkYBoundsWithinDockContainer(e,t,i,n,s);var o=Math.floor(t.y-i.y),l=e.offsetTop+o<0,a=e.offsetTop+o>window.innerHeight-16;if(l)i.y=t.y,o=0;else if(a){i.y=t.y,o=0;var _n16=window.innerHeight-25-e.offsetTop;_n16>0&&(o=_n16)}return o}},{key:"checkYBoundsWithinDockContainer",value:function checkYBoundsWithinDockContainer(e,t,i,n,s){var o=t.y-i.y,l=this.element.getBoundingClientRect(),a=e.getBoundingClientRect(),h=o<0&&a.top+o<l.top&&!s,r=o>0&&a.bottom+o>l.bottom&&!n;return h?(t.y-=o,o=l.top-a.top,t.y-=o):r&&(t.y-=o,o=l.bottom-a.bottom,t.y-=o),o}},{key:"rebuildLayout",value:function rebuildLayout(e){var _this19=this;e.children.forEach(function(e){_this19.rebuildLayout(e)}),e.performLayout(!1)}},{key:"invalidate",value:function invalidate(){this.resize(this.element.clientWidth,this.element.clientHeight)}},{key:"resize",value:function resize(e,t){this.element.style.width=e+"px",this.element.style.height=t+"px",this.context.model.rootNode.container.resize(e,t)}},{key:"setModel",value:function setModel(e){h.removeNode(this.context.documentManagerView.containerElement),this.context.model=e,this.setRootNode(e.rootNode),this.rebuildLayout(e.rootNode),this.loadResize(e.rootNode)}},{key:"loadResize",value:function loadResize(e){var _this20=this;e.children.reverse().forEach(function(t){_this20.loadResize(t),e.container.setActiveChild(t.container)}),e.children.reverse();var t=e.container;e.container.resize(t.state.width,t.state.height)}},{key:"setRootNode",value:function setRootNode(e){e.detachFromParent(),this.context.model.rootNode=e,this.element.appendChild(e.container.containerElement)}},{key:"_onDialogDragStarted",value:function _onDialogDragStarted(e,t){this.dockWheel.activeNode=this._findNodeOnPoint(t.clientX,t.clientY),this.dockWheel.activeDialog=e,null!=e.noDocking&&!0===e.noDocking||this.dockWheel.showWheel(),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler),this.mouseMoveHandler=new r(window,"mousemove",this._onMouseMoved.bind(this)),this.touchMoveHandler=new r(window,"touchmove",this._onMouseMoved.bind(this))}},{key:"_onDialogDragEnded",value:function _onDialogDragEnded(e,t){this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.touchMoveHandler&&(this.touchMoveHandler.cancel(),delete this.touchMoveHandler),this.dockWheel.onDialogDropped(e),this.dockWheel.hideWheel(),delete this.dockWheel.activeDialog,e.saveState(e.elementDialog.offsetLeft,e.elementDialog.offsetTop)}},{key:"_onMouseMoved",value:function _onMouseMoved(e){null!=e.changedTouches&&(e=e.changedTouches[0]),this.dockWheel.activeNode=this._findNodeOnPoint(e.clientX,e.clientY)}},{key:"_findNodeOnPoint",value:function _findNodeOnPoint(e,t){var i,n=[];for(n.push(this.context.model.rootNode);n.length>0;){var _s7=n.pop();h.isPointInsideNode(e,t,_s7)&&(i=_s7,[].push.apply(n,_s7.children))}return i}},{key:"dockDialogLeft",value:function dockDialogLeft(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockLeft.bind(this.layoutEngine))}},{key:"dockDialogRight",value:function dockDialogRight(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockRight.bind(this.layoutEngine))}},{key:"dockDialogUp",value:function dockDialogUp(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockUp.bind(this.layoutEngine))}},{key:"dockDialogDown",value:function dockDialogDown(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockDown.bind(this.layoutEngine))}},{key:"dockDialogFill",value:function dockDialogFill(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockFill.bind(this.layoutEngine))}},{key:"dockLeft",value:function dockLeft(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockLeft.bind(this.layoutEngine),!1,i)}},{key:"dockRight",value:function dockRight(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockRight.bind(this.layoutEngine),!0,i)}},{key:"dockUp",value:function dockUp(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockUp.bind(this.layoutEngine),!1,i)}},{key:"dockDown",value:function dockDown(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockDown.bind(this.layoutEngine),!0,i)}},{key:"dockFill",value:function dockFill(e,t){return this._requestDockContainer(e,t,this.layoutEngine.dockFill.bind(this.layoutEngine),!1)}},{key:"floatDialog",value:function floatDialog(e,t,i){var n=void 0;if(this.context.model.dialogs.forEach(function(s){e==s.panel&&(s.show(),s.setPosition(t,i),n=s)}),n)return n;try{var _t11=this._findNodeFromContainer(e);this.layoutEngine.undock(_t11)}catch(e){}var s=e;h.removeNode(s.elementPanel),s.isDialog=!0;var o=new g(s,this);return o.setPosition(t,i),o}},{key:"_requestDockDialog",value:function _requestDockDialog(e,t,i){var n=t.panel,s=new k(n);return n.prepareForDocking(),t.destroy(),i(e,s),s}},{key:"_checkShowBackgroundContext",value:function _checkShowBackgroundContext(){null!=this.backgroundContext&&(this.context.model.documentManagerNode.children.length>0?this.backgroundContext.style.display="none":this.backgroundContext.style.display="block")}},{key:"_requestDockContainer",value:function _requestDockContainer(e,t,i,n,s){var o=new k(t);if("panel"===t.containerType){var _e20=t;_e20.prepareForDocking(),h.removeNode(_e20.elementPanel)}var l,a=null;if(e.parent&&e.parent.container&&(l=e.parent.container).getRatios&&(a=l.getRatios()),i(e,o),s&&o.parent&&("vertical"===o.parent.container.containerType||"horizontal"===o.parent.container.containerType)){var _e21=o.parent.container;a&&l==_e21?(n?(a[a.length-1]=a[a.length-1]-s,a.push(s)):(a[0]=a[0]-s,a.unshift(s)),_e21.setRatios(a)):_e21.setContainerRatio(t,s)}return this.rebuildLayout(this.context.model.rootNode),this.invalidate(),this._checkShowBackgroundContext(),o}},{key:"_requestTabReorder",value:function _requestTabReorder(e,t){var i=this._findNodeFromContainer(e);this.layoutEngine.reorderTabs(i,t.handle,t.state,t.index)}},{key:"requestUndockToDialog",value:function requestUndockToDialog(e,t,i){var n=this._findNodeFromContainer(e);this.layoutEngine.undock(n);var s=n.container;s.elementPanel.style.display="block";var o=new g(s,this);if(void 0!==t){var _e22=o.elementDialog.clientWidth;i.x>_e22&&(i.x=.75*_e22),o.setPosition(t.clientX-i.x,t.clientY-i.y),o.draggable.onMouseDown(t)}return o}},{key:"requestClose",value:function requestClose(e){var t=this._findNodeFromContainer(e);this.layoutEngine.close(t)}},{key:"openInDialog",value:function openInDialog(e,t,i){var n=new g(e,this);if(void 0!==t){var _e23=n.elementDialog.clientWidth;i.x>_e23&&(i.x=.75*_e23),n.setPosition(t.clientX-i.x,t.clientY-i.y),n.draggable.onMouseDown(t)}return n}},{key:"requestUndock",value:function requestUndock(e){var t=this._findNodeFromContainer(e);this.layoutEngine.undock(t)}},{key:"requestRemove",value:function requestRemove(e){var t=this._findNodeFromContainer(e),i=t.parent;return t.detachFromParent(),i&&this.rebuildLayout(i),t}},{key:"_findNodeFromContainer",value:function _findNodeFromContainer(e){var t=[];for(t.push(this.context.model.rootNode);t.length>0;){var _i12=t.pop();if(_i12.container===e)return _i12;[].push.apply(t,_i12.children)}return null}},{key:"findNodeFromContainerElement",value:function findNodeFromContainerElement(e){var t=[];for(t.push(this.context.model.rootNode);t.length>0;){var _i13=t.pop();if(_i13.container.containerElement===e)return _i13;[].push.apply(t,_i13.children)}return null}},{key:"addLayoutListener",value:function addLayoutListener(e){this.layoutEventListeners.push(e)}},{key:"removeLayoutListener",value:function removeLayoutListener(e){this.layoutEventListeners.splice(this.layoutEventListeners.indexOf(e),1)}},{key:"suspendLayout",value:function suspendLayout(e){var _this21=this;this.layoutEventListeners.forEach(function(t){t.onSuspendLayout&&t.onSuspendLayout(_this21,e)})}},{key:"resumeLayout",value:function resumeLayout(e){var _this22=this;this.layoutEventListeners.forEach(function(t){t.onResumeLayout&&t.onResumeLayout(_this22,e)})}},{key:"notifyOnDock",value:function notifyOnDock(e){var _this23=this;this._checkShowBackgroundContext(),this.layoutEventListeners.forEach(function(t){t.onDock&&t.onDock(_this23,e)})}},{key:"notifyOnTabsReorder",value:function notifyOnTabsReorder(e){var _this24=this;this.layoutEventListeners.forEach(function(t){t.onTabsReorder&&t.onTabsReorder(_this24,e)})}},{key:"notifyOnUnDock",value:function notifyOnUnDock(e){var _this25=this;this._checkShowBackgroundContext(),this.layoutEventListeners.forEach(function(t){t.onUndock&&t.onUndock(_this25,e)})}},{key:"notifyOnClosePanel",value:function notifyOnClosePanel(e){var _this26=this;this._checkShowBackgroundContext(),this.layoutEventListeners.forEach(function(t){t.onClosePanel&&t.onClosePanel(_this26,e)})}},{key:"notifyOnCreateDialog",value:function notifyOnCreateDialog(e){var _this27=this;this.layoutEventListeners.forEach(function(t){t.onCreateDialog&&t.onCreateDialog(_this27,e)})}},{key:"notifyOnHideDialog",value:function notifyOnHideDialog(e){var _this28=this;this.layoutEventListeners.forEach(function(t){t.onHideDialog&&t.onHideDialog(_this28,e)})}},{key:"notifyOnShowDialog",value:function notifyOnShowDialog(e){var _this29=this;this.layoutEventListeners.forEach(function(t){t.onShowDialog&&t.onShowDialog(_this29,e)})}},{key:"notifyOnChangeDialogPosition",value:function notifyOnChangeDialogPosition(e,t,i){var _this30=this;this.layoutEventListeners.forEach(function(n){n.onChangeDialogPosition&&n.onChangeDialogPosition(_this30,e,t,i)})}},{key:"notifyOnContainerResized",value:function notifyOnContainerResized(e){var _this31=this;this.layoutEventListeners.forEach(function(t){t.onContainerResized&&t.onContainerResized(_this31,e)})}},{key:"notifyOnTabChange",value:function notifyOnTabChange(e){var _this32=this;this.layoutEventListeners.forEach(function(t){t.onTabChanged&&t.onTabChanged(_this32,e)})}},{key:"notifyOnActivePanelChange",value:function notifyOnActivePanelChange(e){var _this33=this;this.layoutEventListeners.forEach(function(t){t.onActivePanelChange&&t.onActivePanelChange(_this33,e)})}},{key:"saveState",value:function saveState(){return(new f).serialize(this.context.model)}},{key:"loadState",value:function loadState(e){var t=new U(this);this.context.model=t.deserialize(e),this.setModel(this.context.model)}},{key:"getPanels",value:function getPanels(){var e=[];return this._allPanels(this.context.model.rootNode,e),this.context.model.dialogs.forEach(function(t){e.push(t.panel)}),e}},{key:"undockEnabled",value:function undockEnabled(e){this._undockEnabled=e,this.getPanels().forEach(function(t){t.canUndock(e)})}},{key:"lockDockState",value:function lockDockState(e){this.undockEnabled(!e),this.hideCloseButton(e)}},{key:"hideCloseButton",value:function hideCloseButton(e){this.getPanels().forEach(function(t){t.hideCloseButton(e)})}},{key:"updatePanels",value:function updatePanels(e){var t=[];return this._allPanels(this.context.model.rootNode,t),t.forEach(function(t){h.arrayContains(e,t.elementContent.id)||t.close()}),this.context.model.dialogs.forEach(function(t){h.arrayContains(e,t.panel.elementContent.id)?t.show():t.hide()}),t}},{key:"getVisiblePanels",value:function getVisiblePanels(){var e=[];return this._allPanels(this.context.model.rootNode,e),this.context.model.dialogs.forEach(function(t){t.isHidden||e.push(t.panel)}),e}},{key:"_allPanels",value:function _allPanels(e,t){var _this34=this;e.children.forEach(function(e){_this34._allPanels(e,t)}),"panel"===e.container.containerType&&t.push(e.container)}},{key:"config",get:function get(){return this._config}},{key:"activePanel",get:function get(){return this._activePanel},set:function set(e){e!==this._activePanel?(this.activePanel&&(this.activePanel.elementTitle.classList.remove("dockspan-panel-active"),this.activePanel.elementTitleText.classList.remove("dockspan-panel-titlebar-text-active"),this.activePanel.tabPage&&this.activePanel.tabPage.host.setActive(!1)),this._activePanel=e,this.notifyOnActivePanelChange(e),e&&(e.elementTitle.classList.add("dockspan-panel-active"),e.elementTitleText.classList.add("dockspan-panel-titlebar-text-active"),e.tabPage&&e.tabPage.host.setActive(!0))):e&&e.tabPage&&e.tabPage.host.setActive(!0)}}]);return S}();i.d(t,"ContainerType",function(){return n}),i.d(t,"Dialog",function(){return g}),i.d(t,"DockConfig",function(){return v}),i.d(t,"DockGraphSerializer",function(){return f}),i.d(t,"DockLayoutEngine",function(){return T}),i.d(t,"DockManager",function(){return S}),i.d(t,"DockManagerContext",function(){return N}),i.d(t,"DockModel",function(){return P}),i.d(t,"DockNode",function(){return k}),i.d(t,"DockWheel",function(){return L}),i.d(t,"DockWheelItem",function(){return _}),i.d(t,"DocumentManagerContainer",function(){return B}),i.d(t,"DocumentTabPage",function(){return z}),i.d(t,"DraggableContainer",function(){return u}),i.d(t,"EventHandler",function(){return r}),i.d(t,"FillDockContainer",function(){return x}),i.d(t,"HorizontalDockContainer",function(){return b}),i.d(t,"PanelContainer",function(){return c}),i.d(t,"Point",function(){return a}),i.d(t,"ResizableContainer",function(){return p}),i.d(t,"ResizeHandle",function(){return m}),i.d(t,"SplitterBar",function(){return w}),i.d(t,"SplitterDockContainer",function(){return y}),i.d(t,"SplitterPanel",function(){return M}),i.d(t,"TabHandle",function(){return E}),i.d(t,"TabHost",function(){return D}),i.d(t,"TabPage",function(){return H}),i.d(t,"UndockInitiator",function(){return d}),i.d(t,"Utils",function(){return h}),i.d(t,"VerticalDockContainer",function(){return C})}]);
